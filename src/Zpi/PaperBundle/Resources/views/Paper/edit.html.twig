{% extends '::base.html.twig' %}
{% block js %}
<script type="text/javascript" src="{{ asset('jquery-1.6.3.js') }}"></script> 
<script type="text/javascript">
$(document).ready(function(){
    $("div[data-prototype]").each(function(index) {
        var $self = $(this),
            count = $self.children().length,
            prototype = $self.data('prototype');

        $delete_trigger = $("<button />")
                                .attr({ href: '#' })
                                .text('Delete author')
                                .addClass('delete')
                                .click(function(event) {
                                    $(this).parent().remove();
                                    return false;
                                });

        $self.find("> div").append($delete_trigger.clone(true)).append('<br /><br /><hr />');

        $add_trigger = $("<button /><br /><br /><br />")
                            .attr({ href: '#' })
                            .addClass('add')
                            .text('Add author')
                            .appendTo(this)
                            .click(function(event) {
                                $d = $delete_trigger.clone(true);
                                //$p = $(prototype.replace(/>\$\$name\$\$</g, '><').replace(/\$\$name\$\$/g, count++).replace(/readonly="readonly"/g, '')).append($d).append('<br /><hr />');
                                $p = $(prototype.replace(/\$\$name\$\$/g, count++).replace(/readonly="readonly"/g, '')).append($d).append('<br /><hr />');
                                $(this).before($p);
                                return false;
                            });
    });
});
</script>
{% endblock %}
{% block title %}Paper registration{% endblock %}
{% block bodytitle %}Paper registration{% endblock %}
{% block body %}
<form novalidate="novalidate" action="{{ path('paper_edit', {'id': paper.id}) }}" method="post" {{ form_enctype(form) }}>
	{{ form_errors(form) }}
        {{ form_row(form.title) }}
        {{ form_row(form.abstract) }}
        <h1>Add author by specyfing name:</h1>
        <div>
        {{ form_errors(form.authors) }}
        {{ form_widget(form.authors) }}
        </div>
        <h1>Add author using existing account:</h1>
        <div>
        {{ form_errors(form.authorsExisting) }}
        {{ form_widget(form.authorsExisting) }}
        </div>
        {{ form_rest(form) }}
	<input type="submit" />
</form>
<br />
{{ debug | raw }}

{% endblock %}


